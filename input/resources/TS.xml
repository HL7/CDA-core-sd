<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="TS"/> 
  <text>
    <status value="generated"/>
    <div xmlns="http://www.w3.org/1999/xhtml">
      <p>A quantity specifying a point on the axis of natural time. A point in time is most often represented as a calendar expression.</p>
    </div>
  </text>
  <extension url="http://hl7.org/fhir/tools/StructureDefinition/logical-target">
    <valueBoolean>
      <extension url="http://hl7.org/fhir/StructureDefinition/data-absent-reason">
        <valueCode value="not-applicable"/>
      </extension>
    </valueBoolean>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-namespace">
    <valueUri value="urn:hl7-org:v3"/>
  </extension>
  <url value="http://hl7.org/cda/stds/core/StructureDefinition/TS"/>
  <name value="TS"/>
  <title value="TS: PointInTime (V3 Data Type)"/>
  <status value="active"/>
  <experimental value="false"/>
  <publisher value="HL7"/>
  <description value="A quantity specifying a point on the axis of natural time. A point in time is most often represented as a calendar expression."/>
  <kind value="logical"/>
  <abstract value="false"/>
  <type value="http://hl7.org/cda/stds/core/StructureDefinition/TS"/>
  <baseDefinition value="http://hl7.org/cda/stds/core/StructureDefinition/ANY"/>
  <derivation value="specialization"/>
  <differential>
    <element id="TS">
      <path value="TS"/>
      <definition value="A quantity specifying a point on the axis of natural time. A point in time is most often represented as a calendar expression."></definition>
      <min value="1"/>
      <max value="*"/>
      
      <!-- <constraint>
          <key value="ts-shall-timezone"/>
          <severity value="error"/>
          <human value="If more precise than minute, **SHALL** include time-zone offset"/>
          <expression value="nullFlavor.exists() or value.length() &lt;= 8 or value.matches('[+-][0-9]{2,4}')"/>
      </constraint>
      
      <constraint>
          <key value="ts-a-timezone"/>
          <severity value="error"/>
          <human value="If more precise than minute, **SHALL** include time-zone offset"/>
          <expression value="nullFlavor.exists() or value.length() &lt;= 8 or value.matches('.*[+-][0-9]{2,4}')"/>
      </constraint>
      
      <constraint>
          <key value="ts-b-timezone"/>
          <severity value="error"/>
          <human value="If more precise than minute, **SHALL** include time-zone offset"/>
          <expression value="nullFlavor.exists() or value.length() &lt;= 8 or value.matches('.*[+-][0-9]{2,4}$')"/>
      </constraint>
      
      <constraint>
          <key value="ts-c-timezone"/>
          <severity value="error"/>
          <human value="If more precise than minute, **SHALL** include time-zone offset"/>
          <expression value="nullFlavor.exists() or value.length() &lt;= 8 or value.contains('-') or value.contains('+')"/>
      </constraint> -->

    </element>
    <element id="TS.value">
      <extension url="http://hl7.org/fhir/tools/StructureDefinition/elementdefinition-date-format">
        <valueString value="YYYYMMDDHHMMSS.UUUU[+|-ZZzz]"/>
      </extension>
      <extension url="http://hl7.org/fhir/tools/StructureDefinition/elementdefinition-date-rules">
        <valueString value="year-valid"/>
      </extension>
      <path value="TS.value"/>
      <representation value="xmlAttr"/>
      <definition value="A quantity specifying a point on the axis of natural time. A point in time is most often represented as a calendar expression."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="dateTime"/>
        <profile value="http://hl7.org/cda/stds/core/StructureDefinition/ts-simple"/>
      </type>
    </element>
  </differential>
</StructureDefinition>
